stages:
  - build

build_tarball:
  stage: build
  script:

    - echo "📁 Projektstruktur:"
    - ls -l
    - echo "🔍 Suche nach QML-Dateien:"
    - find . -name "*.qml"
    - cmake -B build -DCMAKE_BUILD_TYPE=Release
    - cmake --build build --parallel
    - mkdir -p dist
    - tar czf dist/kcast-runtime.tar.gz build/bin/de/agundur/kcast/libkcastplugin.so package/metadata.json package/contents/ui
  artifacts:
    paths:
      - dist/kcast-runtime.tar.gz
    expire_in: 7 days
  only:
    - tags
